<div *ngIf="isLoading" class="app-loader"><mat-spinner></mat-spinner></div>
<div class="section" *ngIf="!isLoading">
  <div *ngIf="isHandset$ | async; else wideView" class="content">
    <div class="artist-info">
      <img class="artist-image" src="{{ profile && profile.picture_big }}" alt="{{ profile && profile.name }}" />
      <div class="artist-name">{{ profile && profile.name }}</div>
      <div class="artist-fan-count">
        <fa-icon [icon]="['fas', 'users']"></fa-icon> {{ profile && profile.nb_fan | number }} Fans
      </div>
      <mat-card class="artist-tracks">
        <h3 class="title"><fa-icon [icon]="['fas', 'list-alt']"></fa-icon> Top Tracks</h3>
        <mat-list>
          <mat-list-item *ngFor="let track of topTracks; index as i" class="track-details"
            style="height: fit-content; padding: 4px 0;">
            <div>
              <mat-divider *ngIf="i < topTracks.length -1"></mat-divider>
              <p>{{ i + 1 }}. {{ track.title }}</p>
              <span>
                <fa-icon [icon]="['fas', 'record-vinyl']"></fa-icon>
                <span>{{ track.album.title }}</span>
              </span>
              <mat-chip-list style="padding: 8px 0;">
                <mat-chip *ngFor="let artist of track.contributors; index as i">
                  <mat-chip-avatar>
                    <img src="{{artist.picture_small}}" alt="Photo of a Shiba Inu" />
                  </mat-chip-avatar>
                  {{ artist.name }}
                </mat-chip>
              </mat-chip-list>
            </div>
            <div class="spacer"></div>
            <div class="track-duration">{{ track.duration }}</div>
          </mat-list-item>
        </mat-list>
      </mat-card>
    </div>
    <div class="title">Albums ({{ profile && profile.nb_album }})</div>
    <div class="album-section">
      <div *ngFor="let album of albums; index as i" class="card-item">
        <img class="card-image" src="{{ album.cover_big }}" alt="Photo of {{ album.title }}" />
        <div class="card-content">
          <p class="album-title">{{ album.title }}</p>
          <p>{{ album.release_date | date: "EEE, MMM d, y" }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #wideView>
  <div class="content">
    <div class="artist-info">
      <img class="artist-image" src="{{ profile && profile.picture_big }}" alt="{{ profile && profile.name }}" />
      <div class="artist-name">{{ profile && profile.name }}</div>
      <div class="artist-fan-count">
        <fa-icon [icon]="['fas', 'users']"></fa-icon> {{ profile && profile.nb_fan | number }} Fans
      </div>
      <mat-card class="artist-tracks">
        <h3 class="title"><fa-icon [icon]="['fas', 'list-alt']"></fa-icon> Top Tracks</h3>
        <mat-list>
          <mat-list-item *ngFor="let track of topTracks; index as i" class="track-details"
            style="height: fit-content; padding: 4px 0;">
            <div>
              <mat-divider *ngIf="i < topTracks.length -1"></mat-divider>
              <p>{{ i + 1 }}. {{ track.title }}</p>
              <span>
                <fa-icon [icon]="['fas', 'record-vinyl']"></fa-icon>
                <span>{{ track.album.title }}</span>
              </span>
              <mat-chip-list style="padding: 8px 0;">
                <mat-chip *ngFor="let artist of track.contributors; index as i">
                  <mat-chip-avatar>
                    <img src="{{artist.picture_small}}" alt="Photo of a Shiba Inu" />
                  </mat-chip-avatar>
                  {{ artist.name }}
                </mat-chip>
              </mat-chip-list>
            </div>
            <div class="spacer"></div>
            <div class="track-duration">{{ track.duration }}</div>
          </mat-list-item>
        </mat-list>
      </mat-card>
    </div>
    <p class="title">Albums ({{ profile && profile.nb_album }})</p>
    <div class="album-section">
      <div *ngFor="let album of albums; index as i" class="card-item">
        <img class="card-image" src="{{ album.cover_big }}" alt="Photo of {{ album.title }}" />
        <div class="card-content">
          <p class="album-title">{{ album.title | ucwords }}</p>
          <p>{{ album.release_date | date: "EEE, MMM d, y" }}</p>
        </div>
      </div>
    </div>
  </div>
</ng-template>